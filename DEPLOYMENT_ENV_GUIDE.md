# üöÄ Deployment Environment Variables Guide

Bu faylda proyektin deploy edilm…ôsi √º√ß√ºn lazƒ±m olan **B√úT√úN environment variables** siyahƒ±sƒ± var.

---

## üìã TABLE OF CONTENTS

1. [Frontend Environment Variables](#frontend-environment-variables)
2. [Backend Environment Variables](#backend-environment-variables)
3. [Google OAuth Configuration](#google-oauth-configuration)
4. [Database Configuration](#database-configuration)
5. [Platform-Specific Instructions](#platform-specific-instructions)

---

## üé® FRONTEND ENVIRONMENT VARIABLES

### Development (.env.development)
```env
REACT_APP_API_BASE_URL=http://localhost:5029/api
REACT_APP_GEMINI_API_KEY=your_gemini_api_key_here
REACT_APP_GOOGLE_CLIENT_ID=680043772059-av648urt1kjqrqucf47q43tm908egorb.apps.googleusercontent.com
```

### Production (.env.production)
```env
REACT_APP_API_BASE_URL=https://your-backend-domain.com/api
REACT_APP_GEMINI_API_KEY=your_gemini_api_key_here
REACT_APP_GOOGLE_CLIENT_ID=680043772059-av648urt1kjqrqucf47q43tm908egorb.apps.googleusercontent.com
```

### ‚öôÔ∏è Frontend Variables A√ßƒ±qlamasƒ±:

| Variable | Required | Description | Example |
|----------|----------|-------------|---------|
| `REACT_APP_API_BASE_URL` | ‚úÖ Yes | Backend API base URL | `https://api.yourapp.com/api` |
| `REACT_APP_GEMINI_API_KEY` | ‚ö†Ô∏è Optional | Google Gemini AI moderation key | `AIzaSyD...` |
| `REACT_APP_GOOGLE_CLIENT_ID` | ‚úÖ Yes (for OAuth) | Google OAuth Client ID | `680043772059-...` |

**Note:** `REACT_APP_GEMINI_API_KEY` optional-dƒ±r. Yoxdursa, AI moderation mock mode-da i≈ül…ôy…ôc…ôk.

---

## üñ•Ô∏è BACKEND ENVIRONMENT VARIABLES

### Development (PowerShell)
```powershell
# SMTP Email Configuration
$env:SMTP_HOST="smtp.gmail.com"
$env:SMTP_PORT="587"
$env:SMTP_USERNAME="wanderly.project@gmail.com"
$env:SMTP_PASSWORD="rxeejzckwmwipomd"
$env:SMTP_FROM_EMAIL="wanderly.project@gmail.com"

# Frontend URL (for CORS and password reset emails)
$env:FRONTEND_URL="http://localhost:3000"

# Google OAuth
$env:GOOGLE_CLIENT_ID="680043772059-av648urt1kjqrqucf47q43tm908egorb.apps.googleusercontent.com"

# Database (optional, default from appsettings.json)
$env:ConnectionStrings__DefaultConnection="Server=localhost;Database=ExperienceSharingDB;Trusted_Connection=True;"

# JWT Configuration (optional, default from appsettings.json)
$env:Jwt__Key="your-super-secret-jwt-key-min-32-characters"
$env:Jwt__Issuer="https://localhost:7295"
$env:Jwt__Audience="https://localhost:7295"

# Cloudinary (optional, default from appsettings.json)
$env:Cloudinary__CloudName="dcdwya8kj"
$env:Cloudinary__ApiKey="928331919936363"
$env:Cloudinary__ApiSecret="j5yLvU_DPqLSl0eDDfpJhPbr7o4"

# Port (optional, default from launchSettings.json)
# $env:PORT="5029"
```

### Production (.env or Platform Environment Variables)
```env
# SMTP Email Configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=wanderly.project@gmail.com
SMTP_PASSWORD=rxeejzckwmwipomd
SMTP_FROM_EMAIL=wanderly.project@gmail.com

# Frontend URL
FRONTEND_URL=https://your-frontend-domain.com

# Google OAuth
GOOGLE_CLIENT_ID=680043772059-av648urt1kjqrqucf47q43tm908egorb.apps.googleusercontent.com

# Database
ConnectionStrings__DefaultConnection=Server=your-db-server;Database=ExperienceSharingDB;User Id=your-user;Password=your-password;Encrypt=True;TrustServerCertificate=True;

# JWT Configuration
Jwt__Key=your-super-secret-jwt-key-min-32-characters-CHANGE-THIS-IN-PRODUCTION
Jwt__Issuer=https://your-backend-domain.com
Jwt__Audience=https://your-frontend-domain.com

# Cloudinary (Image Upload)
Cloudinary__CloudName=dcdwya8kj
Cloudinary__ApiKey=928331919936363
Cloudinary__ApiSecret=j5yLvU_DPqLSl0eDDfpJhPbr7o4

# Port (if required by hosting platform)
PORT=8080
```

### ‚öôÔ∏è Backend Variables A√ßƒ±qlamasƒ±:

| Variable | Required | Description | Example |
|----------|----------|-------------|---------|
| `SMTP_HOST` | ‚úÖ Yes | SMTP server host | `smtp.gmail.com` |
| `SMTP_PORT` | ‚úÖ Yes | SMTP server port | `587` |
| `SMTP_USERNAME` | ‚úÖ Yes | Email account username | `your-email@gmail.com` |
| `SMTP_PASSWORD` | ‚úÖ Yes | Gmail App Password (16 chars) | `abcd efgh ijkl mnop` |
| `SMTP_FROM_EMAIL` | ‚úÖ Yes | Sender email address | `your-email@gmail.com` |
| `FRONTEND_URL` | ‚úÖ Yes | Frontend base URL | `https://yourapp.com` |
| `GOOGLE_CLIENT_ID` | ‚úÖ Yes (for OAuth) | Google OAuth Client ID | `680043772059-...` |
| `ConnectionStrings__DefaultConnection` | ‚ö†Ô∏è Optional* | Database connection string | See above |
| `Jwt__Key` | ‚ö†Ô∏è Optional* | JWT secret key (32+ chars) | See above |
| `Jwt__Issuer` | ‚ö†Ô∏è Optional* | JWT issuer | `https://api.yourapp.com` |
| `Jwt__Audience` | ‚ö†Ô∏è Optional* | JWT audience | `https://yourapp.com` |
| `Cloudinary__CloudName` | ‚ö†Ô∏è Optional* | Cloudinary cloud name | `dcdwya8kj` |
| `Cloudinary__ApiKey` | ‚ö†Ô∏è Optional* | Cloudinary API key | `928331919936363` |
| `Cloudinary__ApiSecret` | ‚ö†Ô∏è Optional* | Cloudinary API secret | See above |
| `PORT` | ‚ö†Ô∏è Optional** | Server port | `8080` |

**\*Optional:** `appsettings.json`-da t…ôyin edilibs…ô, environment variable lazƒ±m deyil.  
**\*\*Optional:** ∆èks…ôr hosting platformlarƒ± avtomatik t…ôyin edir (Heroku, Railway, Render).

---

## üîê GOOGLE OAUTH CONFIGURATION

### 1. Google Cloud Console Settings

**Authorized JavaScript origins:**
```
Development:
  http://localhost:3000

Production:
  https://your-frontend-domain.com
```

**Authorized redirect URIs:**
```
Development:
  http://localhost:3000

Production:
  https://your-frontend-domain.com
```

### 2. Enable Google+ API (if not enabled)
- Go to [Google Cloud Console](https://console.cloud.google.com/)
- Navigate to **APIs & Services** ‚Üí **Library**
- Search for **Google+ API** and enable it

### 3. OAuth Consent Screen
- **App name:** Experience Sharing
- **User support email:** wanderly.project@gmail.com
- **Developer contact:** wanderly.project@gmail.com
- **Authorized domains:** (Add your production domain)

---

## üíæ DATABASE CONFIGURATION

### Development (SQL Server Express)
```
Server=localhost;Database=ExperienceSharingDB;Trusted_Connection=True;
```

### Production Examples

#### Azure SQL Database
```
Server=tcp:your-server.database.windows.net,1433;Database=ExperienceSharingDB;User Id=your-user@your-server;Password=your-password;Encrypt=True;TrustServerCertificate=False;Connection Timeout=30;
```

#### Railway PostgreSQL (if migrating)
```
Host=containers-us-west-123.railway.app;Port=5432;Database=railway;Username=postgres;Password=your-password;
```

#### Render.com PostgreSQL
```
postgresql://user:password@dpg-abc123-a.oregon-postgres.render.com/database_name
```

**‚ö†Ô∏è Important:** Entity Framework Core-u PostgreSQL il…ô istifad…ô etm…ôk √º√ß√ºn:
```bash
dotnet add package Npgsql.EntityFrameworkCore.PostgreSQL
```

---

## üì¶ PLATFORM-SPECIFIC INSTRUCTIONS

### üéØ Vercel (Frontend)

**Environment Variables:**
```
REACT_APP_API_BASE_URL=https://your-backend.com/api
REACT_APP_GEMINI_API_KEY=your_key
REACT_APP_GOOGLE_CLIENT_ID=680043772059-av648urt1kjqrqucf47q43tm908egorb.apps.googleusercontent.com
```

**Build Settings:**
- Build Command: `npm run build`
- Output Directory: `build`
- Install Command: `npm install`

---

### üöÇ Railway (Backend)

**Environment Variables:**
Railway dashboard-da bu variables …ôlav…ô edin:

```
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=wanderly.project@gmail.com
SMTP_PASSWORD=rxeejzckwmwipomd
SMTP_FROM_EMAIL=wanderly.project@gmail.com
FRONTEND_URL=https://your-vercel-app.vercel.app
GOOGLE_CLIENT_ID=680043772059-av648urt1kjqrqucf47q43tm908egorb.apps.googleusercontent.com
ConnectionStrings__DefaultConnection=Server=...;Database=...;
Jwt__Key=your-super-secret-jwt-key-CHANGE-THIS
Jwt__Issuer=https://your-railway-app.up.railway.app
Jwt__Audience=https://your-vercel-app.vercel.app
Cloudinary__CloudName=dcdwya8kj
Cloudinary__ApiKey=928331919936363
Cloudinary__ApiSecret=j5yLvU_DPqLSl0eDDfpJhPbr7o4
```

**Build Settings:**
- Build Command: `dotnet publish -c Release -o out`
- Start Command: `dotnet out/ExperienceProject.dll`

---

### üé® Render.com (Backend)

**Environment Variables:**
Render dashboard-da Environment section-da …ôlav…ô edin (Railway il…ô eyni).

**Build Command:**
```bash
dotnet publish -c Release -o out
```

**Start Command:**
```bash
dotnet out/ExperienceProject.dll
```

---

### üåä Azure App Service (Backend)

**Configuration ‚Üí Application Settings:**

Azure Portal-da Configuration b√∂lm…ôsin…ô ke√ßin v…ô **Application Settings** tab-ƒ±nda:

```
Name: SMTP_HOST
Value: smtp.gmail.com

Name: SMTP_PORT
Value: 587

Name: SMTP_USERNAME
Value: wanderly.project@gmail.com

Name: SMTP_PASSWORD
Value: rxeejzckwmwipomd

Name: SMTP_FROM_EMAIL
Value: wanderly.project@gmail.com

Name: FRONTEND_URL
Value: https://your-frontend.azurewebsites.net

Name: GOOGLE_CLIENT_ID
Value: 680043772059-av648urt1kjqrqucf47q43tm908egorb.apps.googleusercontent.com

Name: ConnectionStrings__DefaultConnection
Value: Server=...;Database=...;

(v…ô s.)
```

---

## üß™ LOCAL TESTING SCRIPT

### Windows (PowerShell)

**`start-local-dev.ps1`:**
```powershell
# Frontend
Write-Host "Starting Frontend..." -ForegroundColor Green
Start-Process powershell -ArgumentList "cd C:\Users\Hasan\OneDrive\Desktop\Experiencesharing\depo_diplom\ExperienceSharing; npm start"

# Backend
Write-Host "Starting Backend with Environment Variables..." -ForegroundColor Green
cd C:\Users\Hasan\OneDrive\Desktop\Experiencesharing\depo_diplom\Experience-master\ExperienceProject

$env:SMTP_HOST="smtp.gmail.com"
$env:SMTP_PORT="587"
$env:SMTP_USERNAME="wanderly.project@gmail.com"
$env:SMTP_PASSWORD="rxeejzckwmwipomd"
$env:SMTP_FROM_EMAIL="wanderly.project@gmail.com"
$env:FRONTEND_URL="http://localhost:3000"
$env:GOOGLE_CLIENT_ID="680043772059-av648urt1kjqrqucf47q43tm908egorb.apps.googleusercontent.com"

dotnet run --launch-profile http

Write-Host "Development servers started!" -ForegroundColor Yellow
Write-Host "Frontend: http://localhost:3000" -ForegroundColor Cyan
Write-Host "Backend:  http://localhost:5029" -ForegroundColor Cyan
```

**ƒ∞stifad…ô:**
```powershell
.\start-local-dev.ps1
```

---

### Linux/Mac (Bash)

**`start-local-dev.sh`:**
```bash
#!/bin/bash

# Frontend
echo "Starting Frontend..."
cd /path/to/ExperienceSharing
npm start &

# Backend
echo "Starting Backend..."
cd /path/to/ExperienceProject

export SMTP_HOST="smtp.gmail.com"
export SMTP_PORT="587"
export SMTP_USERNAME="wanderly.project@gmail.com"
export SMTP_PASSWORD="rxeejzckwmwipomd"
export SMTP_FROM_EMAIL="wanderly.project@gmail.com"
export FRONTEND_URL="http://localhost:3000"
export GOOGLE_CLIENT_ID="680043772059-av648urt1kjqrqucf47q43tm908egorb.apps.googleusercontent.com"

dotnet run --launch-profile http

echo "Development servers started!"
echo "Frontend: http://localhost:3000"
echo "Backend:  http://localhost:5029"
```

**ƒ∞stifad…ô:**
```bash
chmod +x start-local-dev.sh
./start-local-dev.sh
```

---

## üõ°Ô∏è SECURITY BEST PRACTICES

### ‚ö†Ô∏è Production-da D…ôyi≈üdirin:

1. **JWT Key:**
   - Minimum 32 karakter
   - Random v…ô g√ºcl√º olmalƒ±dƒ±r
   - He√ß vaxt public repo-da payla≈ümayƒ±n

   ```bash
   # Generate strong key (PowerShell):
   -join ((65..90) + (97..122) + (48..57) | Get-Random -Count 32 | % {[char]$_})
   ```

2. **Database Password:**
   - G√ºcl√º v…ô unikal olmalƒ±dƒ±r
   - Default password istifad…ô etm…ôyin

3. **Cloudinary API Secret:**
   - Yeni account yaradƒ±n v…ô yeni credentials alƒ±n
   - M√∂vcud credentials-i rotate edin

4. **SMTP Password:**
   - Gmail App Password istifad…ô edin (normal password YOX)
   - Her environment √º√ß√ºn ayrƒ± email hesabƒ± yaradƒ±n

---

## üìù DEPLOYMENT CHECKLIST

### ‚úÖ Frontend Deployment

- [ ] `.env.production` faylƒ± yaradƒ±lƒ±b
- [ ] `REACT_APP_API_BASE_URL` production backend URL-…ô y√∂nl…ôndirildi
- [ ] `REACT_APP_GOOGLE_CLIENT_ID` t…ôyin edildi
- [ ] `npm run build` i≈ül…ôyir v…ô x…ôta vermir
- [ ] Google Cloud Console-da production domain …ôlav…ô edildi (Authorized Origins)

### ‚úÖ Backend Deployment

- [ ] B√ºt√ºn environment variables platform-da t…ôyin edildi
- [ ] Database connection string d√ºzg√ºnd√ºr
- [ ] SMTP settings test edildi (email g√∂nd…ôrir)
- [ ] JWT Key production-da d…ôyi≈üdirildi (minimum 32 char)
- [ ] `Jwt__Issuer` v…ô `Jwt__Audience` production URL-l…ôr il…ô yenil…ôndi
- [ ] CORS policy-d…ô production frontend URL …ôlav…ô edildi
- [ ] Database migration t…ôtbiq edildi: `dotnet ef database update`

### ‚úÖ Google OAuth

- [ ] Google Cloud Console-da production domain …ôlav…ô edildi
- [ ] Authorized JavaScript origins: `https://your-frontend.com`
- [ ] Authorized redirect URIs: `https://your-frontend.com`
- [ ] Google+ API aktiv edildi
- [ ] OAuth Consent Screen tamamlandƒ±

### ‚úÖ Testing

- [ ] Frontend-d…ôn backend-…ô request g√∂nd…ôr…ô bilir
- [ ] Login/SignUp i≈ül…ôyir
- [ ] Google OAuth i≈ül…ôyir
- [ ] Forgot Password email g√∂nd…ôrir
- [ ] Image upload i≈ül…ôyir (Cloudinary)
- [ ] CORS x…ôtasƒ± yoxdur

---

## üêõ TROUBLESHOOTING

### Google OAuth "origin not allowed" x…ôtasƒ±:

**H…ôll:**
1. [Google Cloud Console](https://console.cloud.google.com/) ‚Üí **Credentials**
2. OAuth 2.0 Client ID-ni se√ßin
3. **Authorized JavaScript origins** …ôlav…ô edin:
   - Development: `http://localhost:3000`
   - Production: `https://your-domain.com`
4. **Save** basƒ±n
5. 5 d…ôqiq…ô g√∂zl…ôyin (Google cache)
6. Frontend-i refresh edin (`Ctrl + Shift + R`)

### Backend connection refused:

**H…ôll:**
1. Backend i≈ül…ôdiyini yoxlayƒ±n: `netstat -ano | findstr :5029`
2. Environment variables t…ôyin edilib? `echo $env:SMTP_HOST`
3. Backend restart edin: `dotnet run --launch-profile http`

### CORS x…ôtasƒ±:

**H…ôll:**
1. `Program.cs`-d…ô CORS policy-y…ô production URL …ôlav…ô edin:
   ```csharp
   policy.WithOrigins(
       "http://localhost:3000",
       "https://your-production-domain.com"
   )
   ```
2. Backend restart edin

---

## üìû SUPPORT

Deployment zamanƒ± probleml…ôr yaranarsa:

1. **Backend logs** yoxlayƒ±n (platform console)
2. **Browser console** yoxlayƒ±n (F12)
3. **Environment variables** d√ºzg√ºn t…ôyin edilibmi yoxlayƒ±n
4. Bu dokumentd…ôki **Troubleshooting** b√∂lm…ôsin…ô baxƒ±n

---

**Uƒüurlar deployment-da! üöÄ**

